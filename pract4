
const expenseTracker = {

     expenses: [],

     addExpense(title, amount, category) {
          if (!title || Number.isNaN(amount) || amount <= 0) {
               console.log("Ошибка ввода: проверьте, что сумма — это число больше 0, а название не пустое.");
               return;
          }

               const object = {
                    id: Date.now(),
                    title: title,
                    amount: amount,
                    category: category
                    }

          this.expenses.push(object)

},
     deleteExpense(id) {

          if (Number.isNaN(id)) {
               console.log("Ошибка, повторите ввод.");
               return;
          }

          const index = this.expenses.findIndex((item) => item.id === id);

          if (index === -1) {
               console.log(`Ошибка: Расход с ID ${id} не найден.`);
               return;
          }

          this.expenses.splice(index, 1);
          console.log(`Расход с id ${id} удален.`);
     },
     printCategoryStatistics() {
          const stats = {};

          this.expenses.forEach((stat) => {
               if (stats[stat.category] === undefined) {
                    stats[stat.category] = 0;
               }

               stats[stat.category] += stat.amount;
          });


          console.log("Статистика по категориям");
          for (const key in stats) {
               console.log(`${key}: ${stats[key]}`);
          }
     },


     printAllExpenses() {
          console.log("Список ваших расходов");
          this.expenses.forEach((total) => {
          console.log(`ID: ${total.id}, Название: ${total.title}, Сумма: ${total.amount}, Категория: ${total.category}`);
     });

     if (this.expenses.length === 0) {
          console.log("Список пока пуст.");
     }
},


     getTotalAmount() {
     let total = 0;

     for (let i = 0; i < this.expenses.length; i++) {
          total = total + this.expenses[i].amount;
     }

     console.log(`Общая сумма всех расходов: ${total}`);
     return total
},

     getExpensesByCategory(category) {
          const list = this.expenses.filter((item) => {
               return item.category === category;
          });
          let sum = 0;
          list.forEach((item) => {
               sum = sum + item.amount;
          });
          console.log(`На категорию ${category} вы потратили: ${sum}`);
          return list;
},

     findExpenseByTitle(title) {
          if (!title) {
               console.log("Ввод отменен или строка пуста.");
               return;
          }
     const result = this.expenses.find((each) => {
          return each.title && each.title.toLowerCase().includes(title.toLowerCase());
     });


          if (result) {
               console.log("Найдено:", result);
          } else {
               console.log("Ничего не найдено.");
          }
          let stroka = prompt("Введите дополнительную строку или нажмите Отмена:");
          if (stroka !== null && stroka.trim() !== "") {
               this.expenses.push({ id: Date.now(), title: stroka, amount: 0, category: "Заметка" });
               console.log("Заметка добавлена");
          } else {
               console.log("Добавление заметки отменено.");
          }


     return result
}



}

while (true) {
     let message = `
          1. Добавление расхода
          2. Вывод всех расходов
          3. Подсчёт общего баланса
          4. Фильтрация по категории
          5. Поиск расхода
          6. Метод удаления расхода по id
          7. Вывод статистики по категориям
          8. Выход из программы
          `;

          console.log(message)
          let choice = parseInt(prompt("Введите ваш выбор:"))
          if (choice === 1) {
               let title = prompt("Введите название расхода:");
               let amount = parseFloat(prompt("Введите сумму:"));
               let category = prompt("Введите категорию:");
               expenseTracker.addExpense(title, amount, category)
          }
          else if (choice === 2) {

               expenseTracker.printAllExpenses()
          }
          else if (choice === 3 ) {
               expenseTracker.getTotalAmount()

          }
          else if (choice === 4) {
               let category = prompt("Введите категорию для поиска:");
               expenseTracker.getExpensesByCategory(category)

          }
          else if (choice === 5)
          {
               let title = prompt("Введите строку для поиска расхода:");
               expenseTracker.findExpenseByTitle(title)

          }
          else if (choice === 6) {
               let id = parseInt(prompt("Введите ID расхода для удаления:"));
               expenseTracker.deleteExpense(id)

          }
          else if (choice === 7) {
               expenseTracker.printCategoryStatistics()
          }
          else if (choice === 8) {
               console.log("Удачи на дорогах");
               break;
          }
          else {
               console.log("Введите число от 1 до 8");
          }


}


