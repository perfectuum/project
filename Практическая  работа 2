import time
import sys

def print_slow(text, delay = 0.03):
    for char in text:
        sys.stdout.write(char)
        sys.stdout.flush()
        time.sleep(delay)
    print()

imya_igroka = ""
klichka_igroka = ""
srok_zaklyucheniya = 0
inventar = []
tekushchaya_komnata = "камера"

predmety = {
    "молоток": {"описание": "Можно разбить замок"},
    "отмычки": {"описание": "Открывают двери"},
    "форма охранника": {"описание": "Позволяет пройти незамеченным"},
    "документы": {"описание": "Доказательства невиновности"}
}

komnaty = {
    "камера": {
        "описание": "Тёмная камера. Ржавые койки, запах плесени.",
        "доступны": ["двор", "туалет"]
    },
    "двор": {
        "описание": "Прогулочный двор.",
        "доступны": ["камера", "комната_охраны", "качалка"]
    },
    "комната_охраны": {
        "описание": "Комната с формой, пропусками и сейфом.",
        "доступны": ["двор"],
        "содержит": ["молоток", "отмычки"]
    },
    "качалка": {
        "описание": "Старые тренажёры. Воняет потом.",
        "доступны": ["двор"]
    },
    "раздевалка": {
        "описание": "Шкафчики с формой охраны.",
        "доступны": ["столовая"],
        "содержит": ["форма охранника"]
    },
    "столовая": {
        "описание": "Грязные столы, запах борща.",
        "доступны": ["раздевалка", "камера", "выход", "архив"]
    },
    "туалет": {
        "описание": "Воняет. Грязно.",
        "доступны": ["камера"]
    },
    "архив": {
        "описание": "Тускло освещённая комната с металлическими шкафами. В углу лежит потрёпанный чемодан.",
        "содержит": ["документы"]
    },
    "выход": {
        "описание": "КПП. Свобода."
    }
}

def poluchit_korrektnyy_vvod(zapros, dopustimye_varianty):
    while True:
        vvod_polzovatelya = input(zapros)
        if vvod_polzovatelya in dopustimye_varianty:
            return vvod_polzovatelya
        else:
            print("Неверный ввод. Пожалуйста, выберите один из вариантов: " + ", ".join(dopustimye_varianty))

def vvedenie():
    print("_" * 45)
    print("           Escape from the shadows")
    print("_" * 45)
    print_slow("Добро пожаловать в текстовую игру-новеллу.")
    print()
    global imya_igroka, klichka_igroka, srok_zaklyucheniya
    imya_igroka = input("Введите ваше имя: ")
    print()
    print("Выберите кличку:")
    print("1. Тень")
    print("2. Крюк")
    print("3. Барон")
    print("4. Шрам")
    print("5. Призрак")
    vybor = poluchit_korrektnyy_vvod("Введите номер: ", ["1", "2", "3", "4", "5"])
    if vybor == "1":
        klichka_igroka = "Тень"
    elif vybor == "2":
        klichka_igroka = "Крюк"
    elif vybor == "3":
        klichka_igroka = "Барон"
    elif vybor == "4":
        klichka_igroka = "Шрам"
    elif vybor == "5":
        klichka_igroka = "Призрак"

    while True:
        try:
            srok_zaklyucheniya = int(input("Введите срок заключения (5-25): "))
            if 5 <= srok_zaklyucheniya <= 25:
                break
            else:
                print("Срок должен быть от 5 до 25 лет.")
        except ValueError:
            print("Пожалуйста, введите число от 5 до 25.")

    print_slow(f"\nПривет, {klichka_igroka} ({imya_igroka}). Ты проведёшь здесь {srok_zaklyucheniya} лет ....если не сбежишь.")
    input("\nНажмите Enter, чтобы начать...")
    predystoriya()

def predystoriya():
    print("_" * 45)
    print("           ПРЕДЫСТОРИЯ")
    print("_" * 45)
    print_slow(f"Вы — {imya_igroka}.")
    print_slow("Раньше вы управляли инвестиционным фондом «Арасака».")
    print_slow("У вас был офис с панорамным видом, квартира на набережной, и вы верили в честный бизнес.")
    print()
    print_slow("Но однажды ваш партнёр — Артемий Лебедев — предложил «оптимизировать» налоги.")
    print_slow("Вы подписали документы, не прочитав до конца. А зря.")
    print()
    print_slow("Через месяц налоговая нагрянула с обыском. Артём исчез.")
    print_slow("А вас арестовали за отмывание 120 миллионов рублей.")
    print()
    print_slow("На суде он выступил как «ключевой свидетель».")
    print_slow("Сказал, что вы — главный организатор. Что он лишь «исполнял приказы».")
    print()
    print_slow("Судья не поверил вашим слезам.")
    print_slow(f"Вы получили {srok_zaklyucheniya} лет строгого режима в колонии «Серый Камень».")
    print()
    print_slow("Но вы знаете правду.")
    print_slow("И знаете, что копии настоящих документов — в тюремном архиве. Оригиналы — у Артёма, но даже копии могут спасти вас.")
    print()
    print_slow("Ваша цель — выбраться.")
    print_slow("Доказать свою невиновность.")
    print_slow("И заставить его посмотреть вам в глаза... когда его поведут по вашему следу.")
    input("\nНажмите Enter, чтобы продолжить...")
    v_kameru()

def v_kameru():
    global tekushchaya_komnata
    print("_" * 45)
    print("           ВСТУПЛЕНИЕ: КАМЕРА")
    print("_" * 45)
    print_slow("Вы входите в камеру №17.")
    print_slow("Холодный бетон, ржавая койка, запах плесени и отчаяния.")
    print()
    print_slow("За решёткой — двое сокамерников.")
    print()
    print_slow("Борода — лет 50, борода до груди, шрам через бровь. Бывший моряк, видавший виды.")
    print_slow("Молчун — моложе, худой, глаза как у крысы. Говорит редко, но каждое слово — как нож.")
    print()
    print_slow("Борода поднимает взгляд, будто оценивая вас на вес золота:")
    print_slow("— Ну, новенький? Как звать?")
    print()
    print_slow("Молчун не отрывается от окна, но бросает:")
    print_slow("— Не трожь его. Всё равно сдохнет через месяц.")
    print()
    print_slow("Что вы отвечаете?")
    print(f"1. «Зовите меня {klichka_igroka}. Я не собираюсь здесь задерживаться.»")
    print("2. «Отвали. Я не в настроении.»")
    print("3. «А вы кто такие?»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2", "3"])
    if vybor == "1":
        print()
        print_slow("Борода прищуривается:")
        print_slow("— Амбициозный, значит... Ну что ж, мне такие нравятся. Только не ломай зубы о решётку — она крепче тебя.")
    elif vybor == "2":
        print()
        print_slow("Молчун медленно поворачивает голову. Его глаза — как у голодной крысы в подвале:")
        print_slow("— Тогда сиди в углу. И не дыши.")
    elif vybor == "3":
        print()
        print_slow("Борода усмехается:")
        print_slow("— Я — Борода. Он — Молчун. А ты... пока просто тень на стене. Но, может, и не надолго.")

    print()
    print_slow("Через час в камеру входит Смотрящий — высокий, с тату «Закон» на шее.")
    print_slow("Он не смотрит в глаза. Говорит спокойно, но с угрозой:")
    print()
    print_slow("— Через час — прогулка. Не шумите. Не деритесь. Иначе — карцер на неделю.")
    print()
    print_slow("Он уходит.")
    print()
    print_slow("Борода шепчет вам, наклонившись:")
    print_slow(f"— Эй, {klichka_igroka}. Хочешь карту тюрьмы? У меня есть. Но за информацию — информация. Кто ты по жизни?")
    print()
    print("1. «Бизнесмен. Меня подставили.»")
    print("2. «Не твоё дело. Дай карту.»")
    print("3. «Я тот, кто выберется отсюда первым.»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2", "3"])
    if vybor == "1":
        print()
        print_slow("Борода кивает, будто вспомнил своё прошлое:")
        print_slow("— Подставы — хлеб тюремный. Держи.")
        print_slow("Он передаёт сложенный листок. Вы разворачиваете её.")
        print_slow("На ней чётко отмечена комната охраны — рядом с прогулочным двором.")
        print_slow("Там форма, пропуска... и ключи к воротам.")
        print_slow("Также помечена комната архива — там хранят дела заключённых. Может, там что-то про тебя есть...")
        print_slow("План рождается сам собой.")
    elif vybor == "2":
        print()
        print_slow("Борода хмурится, но даёт карту:")
        print_slow("— Ладно. Но если сдохнешь — не жалуйся. Здесь не прощают глупости.")
        print_slow("Вы разворачиваете её.")
        print_slow("На ней чётко отмечена комната охраны — рядом с прогулочным двором.")
        print_slow("Там форма, пропуска... и ключи к воротам.")
        print_slow("Также помечена комната архива — там хранят дела заключённых. Может, там что-то про тебя есть...")
        print_slow("План рождается сам собой.")
    elif vybor == "3":
        print()
        print_slow("Борода смеётся тихо, почти с уважением:")
        print_slow("— Вот это ответ. Держи карту. Может, повезёт. А может — и нет. Но попытка стоит жизни.")
        print_slow("Вы разворачиваете её.")
        print_slow("На ней чётко отмечена комната охраны — рядом с прогулочным двором.")
        print_slow("Там форма, пропуска... и ключи к воротам.")
        print_slow("Также помечена комната архива — там хранят дела заключённых. Может, там что-то про тебя есть...")
        print_slow("План рождается сам собой.")

    print()
    print_slow("Вы ждёте звонка. Наконец — прогулка.")
    print_slow("Вы выходите из камеры.")
    tekushchaya_komnata = "двор"
    input("\nНажмите Enter, чтобы продолжить...")
    uroven_1()

def uroven_1():
    global tekushchaya_komnata, inventar
    print("_" * 45)
    print("           УРОВЕНЬ 1: ПРОГУЛКА")
    print("_" * 45)
    print_slow(komnaty[tekushchaya_komnata]["описание"])
    print()
    print_slow("Вы выходите во двор. Солнце режет глаза. Охрана на вышках. Псы лают.")
    print("Что делаете?")
    print("1. Сразу идти к комнате охраны.")
    print("2. Пойти в качалку — отвлечь внимание.")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
    if vybor == "1":
        print()
        print_slow("Охранник замечает вас у двери:")
        print_slow("— Эй! Ты куда?!")
        print_slow("Вас хватают, бьют, волокут в камеру.")
        print_slow("Вы теряете сознание.")
        print_slow("→ ЗАГРУЗКА КОНТРОЛЬНОЙ ТОЧКИ...")
        uroven_1()
        return
    elif vybor == "2":
        print()
        print_slow("Вы подходите к ржавым тренажёрам.")
        print("Что делаете?")
        print("1. Подтягивания")
        print("2. Жим лёжа")
        vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
        if vybor == "1":
            print()
            print_slow("Борода шепчет с одобрением:")
            print_slow("— Ты ещё и качок? Ну-ну… Может, и правда выберешься.")
        elif vybor == "2":
            print()
            print_slow("Молчун бросает сухо:")
            print_slow("— Слабак. Но упрямый. Это уже что-то.")

    print()
    print_slow("После тренировки вы незаметно направляетесь к комнате охраны.")
    print_slow("Вдруг из-за угла выходит Громила — заключённый с кулаками размером с кирпич.")
    print()
    print_slow("— Видел, как ты там качался. Думаешь, ты особенный? Здесь все равны. Или я неправ?")
    print()
    print("1. «Я просто разминался. Ты же не против?»")
    print("2. «Отвали, пока зубы целы.»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
    if vybor == "1":
        print()
        print_slow("Громила фыркает, но в уголках его губ мелькает ухмылка:")
        print_slow("— Шутник, значит... Ладно, проходи. Только не забудь — здесь шутки кончаются быстро.")
        print_slow("Он уходит.")
    elif vybor == "2":
        print()
        print_slow("Он врезает вам в челюсть. Вы падаете. Через минуту он уходит.")
        print_slow("Вы встаёте, потирая лицо. Вкус крови во рту.")

    tekushchaya_komnata = "комната_охраны"
    print()
    print_slow("Вы заходите в комнату охраны.")
    print_slow(komnaty[tekushchaya_komnata]["описание"])

    osmotrennye = []
    while len(osmotrennye) < 3:
        print("Что проверить?")
        print("1. Шкаф с формой")
        print("2. Ящик стола")
        print("3. Сейф в углу")
        vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2", "3"])

        if vybor == "1":
            if "шкаф" not in osmotrennye:
                print()
                print_slow("Шкаф пуст. Только пыль и запах пота. Форму, видимо, увезли на стирку — сегодня же «день чистоты».")
                osmotrennye.append("шкаф")
            else:
                print("Вы уже осмотрели шкаф.")
        elif vybor == "2":
            if "ящик" not in osmotrennye:
                print()
                print_slow("Ящик завален бумагами: списки, квитанции, даже любовное письмо от жены охраннику... Но ничего, что помогло бы вам сбежать.")
                osmotrennye.append("ящик")
            else:
                print("Вы уже осмотрели ящик.")
        elif vybor == "3":
            if "сейф" not in osmotrennye:
                print()
                print_slow("Под ковриком — ключ. Сейф открывается со скрипом.")
                print_slow("Внутри — два предмета, от которых зависит ваша судьба:")
                print("- Тяжёлый молоток — грубая сила.")
                print("- Набор отмычек — тонкая работа.")
                print()
                print("Вы можете взять только один.")
                print("Что берёте?")
                print("1. Молоток")
                print("2. Отмычки")
                podvybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
                if podvybor == "1":
                    inventar.append("молоток")
                    print()
                    print_slow("Вы берёте молоток. Он холодный, тяжёлый... и решительный.")
                elif podvybor == "2":
                    inventar.append("отмычки")
                    print()
                    print_slow("Вы берёте отмычки. Маленькие, но могущественные.")
                osmotrennye.append("сейф")
            else:
                print("Вы уже осмотрели сейф.")

    print()
    print_slow("Вы пробираетесь обратно. Вас никто не видит.")
    print_slow("Вы возвращаетесь в камеру.")
    print_slow("Борода встречает вас, прищурившись:")
    print_slow("— Где шлялся?")
    print()
    print("1. «Я нашёл способ выбраться. У меня есть инструмент. Нужна только форма и пропуск.»")
    print("2. «В туалет ходил. Желудок шалил.»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
    if vybor == "1":
        print()
        print_slow("Борода кивает, будто гордится вами:")
        print_slow("— Умный. Вечером ужин. В это время охрана меняет посты.")
        print_slow("Раздевалка остаётся без присмотра. Там форма. И, может, пропуска.")
        print_slow("А ещё — не забывай про архив. Там могут быть твои бумаги.")
    elif vybor == "2":
        print()
        print_slow("Молчун бросает с презрением:")
        print_slow("- Тогда не жри наш хлеб.")

    print()
    print_slow("По громкой связи:")
    print_slow("— Внимание! Через 2 часа — ужин.")
    print_slow("Вы ложитесь на койку. Изучаете карту. Строите маршрут к раздевалке, она как раз недолеко от сталовой.")
    print_slow("Спать не хочется. Но нужно набраться сил.")
    input("\nНажмите Enter, чтобы продолжить...")
    uroven_2()

def uroven_2():
    global tekushchaya_komnata, inventar

    print("_" * 45)
    print("           УРОВЕНЬ 2: УЖИН И РАЗДЕВАЛКА")
    print("_" * 45)
    print_slow("Вы стоите в очереди. Воняет капустой и старым жиром.")
    print_slow("Повар (сквозь окошко), уставший и злой:")
    print_slow("— Что брать будешь?")
    print()
    print("1. Пюре с котлетой")
    print("2. Суп с гречкой")
    print("3. Мясное рагу")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2", "3"])
    print()
    print_slow("Вам выдают еду.")
    print("Что делать?")
    print("1. Уйти молча")
    print("2. Сказать: «Спасибо»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
    if vybor == "2":
        print()
        print_slow("Повар удивлён. Он смягчается на миг:")
        print_slow("— ...Никто не благодарит. Мы тут не ресторан.")
    print()
    print_slow("Вы доедаете и проситесь в туалет.")
    print_slow("В коридоре вы сворачиваете не в туалет, а направо — к раздевалке.")
    tekushchaya_komnata = "раздевалка"
    print()
    print_slow("Вы заходите в раздевалку. Дверь открыта!")
    print_slow(komnaty[tekushchaya_komnata]["описание"])

    while True:
        print("Внутри — три шкафчика какой проверите ?:")
        print("— 31")
        print("— 60")
        print("— 43")
        vybor = poluchit_korrektnyy_vvod("Введите номер: ", ["31", "60", "43"])
        print()
        print_slow("Вы находите форму охранника. Она пахнет потом и дешёвым мылом.")
        if "форма охранника" not in inventar:
            inventar.append("форма охранника")
        print()
        print_slow("Вы прячете форму под робу.")
        print_slow("Внезапно — шаги!")
        print_slow("Охранник входит, ворча:")
        print_slow("— Чёрт, кошелёк забыл...")
        print("Что делаете?")
        print("1. Залезть в пустой шкафчик")
        print("2. Спрятаться под лавкой")
        vybor_skrivaniya = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])
        if vybor_skrivaniya == "2":
            print()
            print_slow("Он замечает вас:")
            print_slow("— Ага!")
            print_slow("Вас ловят. Бьют. Возвращают в камеру.")
            print_slow("→ ЗАГРУЗКА КОНТРОЛЬНОЙ ТОЧКИ...")
            print("(Вы снова стоите у шкафчиков.)")
            continue
        elif vybor_skrivaniya == "1":
            print()
            print_slow("Он открывает соседний шкафчик, берёт кошелёк и уходит, ворча:")
            print_slow("— Опять эти дурацкие шкафчики, вечно скрипят, тошно уже...")
            print_slow("Вы вылезаете. Возвращаетесь в столовую.")
            print_slow("Борода спрашивает:")
            print_slow("— Что так долго?")
            print_slow("Вы отвечаете:")
            print_slow("— Заблудился. Здесь всё одинаковое.")
            break

    print()
    print_slow("Вы возвращаетесь в камеру. Ложитесь спать.")
    print_slow("\nЗавтра — последний шанс.")
    input("\nНажмите Enter, чтобы проснуться...")
    uroven_3()

def uroven_3():
    global tekushchaya_komnata, inventar
    print("_" * 45)
    print("           УРОВЕНЬ 3: ПОБЕГ")
    print("_" * 45)
    print_slow("Утро. 7:55. Все спят.")
    print_slow("Вы просыпаетесь от шума дождя за окном. Сегодня ваш день.")
    print()
    print_slow("Борода шепчет вам с соседней койки:")
    print_slow("— Ну что, пёс? Готов к прогулке? Сегодня дождь — охрана будет вялая.")
    print()
    print("1. «Да, я готов. Сегодня я ухожу.»")
    print("2. «Может, отложим? Погода плохая.»")
    print("3. «У меня есть план, но нужна твоя помощь.»")
    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2", "3"])

    if vybor == "1":
        print()
        print_slow("Борода кивает с уважением:")
        print_slow("— Удачи, браток. Если выберешься — передай привет воле.")
    elif vybor == "2":
        print()
        print_slow("Молчун бросает из угла:")
        print_slow("— Трусишь? Я так и знал.")
        print_slow("Борода хмурится:")
        print_slow("— Решай быстрее. Окно возможностей закрывается.")
    elif vybor == "3":
        print()
        print_slow("Борода настораживается:")
        print_slow("— Какая помощь? Говори быстрее.")
        print_slow("Вы объясняете, что нужен отвлекающий манёвр.")
        print_slow("Борода усмехается:")
        print_slow("— Ладно, устроим драку в столовой. Но ты должен быть быстрым.")

    print()
    print_slow("Вы подходите к двери камеры. Замок заперт.")
    print_slow("Что будете делать?")

    dopustimye_vybory = []
    if "отмычки" in inventar:
        print("1. Использовать отмычки (тихо и незаметно)")
        dopustimye_vybory.append("1")
    if "молоток" in inventar:
        print("2. Разбить замок молотком (громко, но быстро)")
        dopustimye_vybory.append("2")
    print("3. Подождать, пока откроет охрана")
    dopustimye_vybory.append("3")

    vybor = poluchit_korrektnyy_vvod("Выберите: ", dopustimye_vybory)

    if vybor == "1":
        print()
        print_slow("Вы аккуратно вставляете отмычки в замочную скважину.")
        print_slow("Через минуту слышен щелчок — замок открыт.")
        print_slow("Вы тихо выходите в коридор.")
    elif vybor == "2":
        print()
        print_slow("Вы с размаху бьёте молотком по замку!")
        print_slow("ГРОМКИЙ ЗВОН разносится по коридору!")
        print_slow("Но замок поддаётся. Вы выбегаете в коридор.")
        print_slow("Издалека слышны крики охраны — они идут на шум!")
    elif vybor == "3":
        print()
        print_slow("Вы ждёте 15 минут. Входит охрана для утреннего обхода.")
        print_slow("Пока они проверяют камеры, вы незаметно проскальзываете в коридор.")
        print_slow("Но вы теряете драгоценное время. Охрана уже на постах — шанс сбежать ниже.")

    print()
    print_slow("Вы в коридоре. Нужно переодеться в форму.")
    print("Куда пойдёте?")
    print("1. В туалет (близко, но могут зайти)")
    print("2. В подсобку (дальше, но безопаснее)")

    vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])

    if vybor == "1":
        print()
        print_slow("Вы заскакиваете в туалет и запираетесь в кабинке.")
        print_slow("Переодеваетесь в форму охранника.")
        print_slow("Внезапно заходят два охранника!")
        print_slow("— Засранец Николай опять из-за него влетит от начальника...")
        print_slow("Вы задерживаете дыхание...")
        print_slow("Они уходят, ничего не заметив.")
    elif vybor == "2":
        print()
        print_slow("Вы пробираетесь в дальнюю подсобку.")
        print_slow("Спокойно переодеваетесь в форму.")
        print_slow("Теперь вы выглядите как обычный охранник.")

    print()
    print_slow("Теперь у вас есть форма. Дальше — развилка.")
    print("Куда пойдёте?")

    if "отмычки" in inventar:
        print("1. Пойти в архив (Там могут быть доказательства.)")
        print("2. Идти прямо к КПП")

        vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])

        if vybor == "1":
            tekushchaya_komnata = "архив"
            print()
            print_slow("Вы подходите к двери архива.")
            print_slow("Вы достаёте отмычки. Дверь открывается без звука.")
            print_slow("Внутри — пыль, картотека... и в углу — металлический чемодан.")
            print_slow("Вы открываете его. Деньги. И папка с подписью Артёма: «Подлинные документы».")
            print_slow("Вы берёте всё. Это ваша месть. И ваша свобода.")
            inventar.append("документы")
            print_slow("Вы забираете чемодан и направляетесь к выходу.")

        elif vybor == "2":
            print()
            print_slow("Вы проходите мимо двери архива. У вас нет времени.")
            print_slow("Вы направляетесь к КПП.")

    else:
        print("1. Попытаться открыть архив")
        print("2. Идти прямо к КПП")

        vybor = poluchit_korrektnyy_vvod("Выберите: ", ["1", "2"])

        if vybor == "1":
            print()
            print_slow("Вы подходите к двери. Она стальная. Молоток бесполезен.")
            print_slow("Вы уже поворачиваетесь, чтобы уйти...")
            print()
            print_slow("Вдруг из соседней камеры доносится хриплый голос:")
            print_slow("— Эй, новенький… Ты же мимо сокровищ прошёл.")
            print_slow("Вы оборачиваетесь. В решётке — старик с пустыми глазами.")
            print_slow("— Там, за дверью, — всё, что тебе нужно. Но у тебя нет ключа, да?")
            print_slow("Он смеётся, кашляет, и замолкает.")
            print_slow("Вы сжимаете зубы. Он прав. Но назад пути нет.")

    print()
    print_slow("Вы подходите к контрольно-пропускному пункту.")
    print_slow("Молодой охранник смотрит на вас подозрительно.")

    est_dokumenty = "документы" in inventar

    if est_dokumenty:
        print()
        print_slow("Вы показываете охраннику документы:")
        print_slow("— Смотри! Меня подставили! Эти документы доказывают!")
        print_slow("Охранник читает... его лицо меняется.")
        print_slow("— Чёрт... Ты прав. Проходи быстрее!")
        print_slow("Он сам открывает вам ворота.")
    else:
        print()
        print_slow("— Новенький? — спрашивает охранник.")
        print_slow("— Да, сегодня первый день, — отвечаете вы.")
        print_slow("Охранник смотрит на вас пристально...")
        print_slow("— Странно, мне не сообщали о новичках...")
        print_slow("Но ваша форма выглядит убедительно.")
        print_slow("— Ладно, проходи. Но зайди к начальнику.")
        print_slow("Вы проходите, чувствуя его взгляд в спину.")

    print()
    print_slow("Вы выходите на улицу. Холодный ветер бьёт в лицо.")
    print_slow("Дождь... но это дождь свободы!")
    print_slow("Вы делаете глубокий вдох...")
    print_slow("ВЫ СВОБОДНЫ!")
    input("Нажмите Enter, чтобы продолжить...")
    epilog()

def epilog():
    print("_" * 45)
    print("      ЭПИЛОГ")
    print("_" * 45)

    if "отмычки" in inventar:
        print_slow(f"Прошло три месяца. {imya_igroka} ({klichka_igroka}) стоял у ворот особняка Артёма.")
        print() 
        print_slow("С документами, вы доказали свою невиновность.")
        print_slow("Вас полностью оправдали. Вы вернули себе имя и восстановили репутацию.")
        print_slow("«Арасака» снова под вашим управлением.")
        print_slow("Но вы поняли, что старая жизнь оставила шрамы. Вы продали компанию.")
        print_slow("С деньгами от продажи компании, а также с деньгами из архива, вы уехали в другую страну.")
        print_slow("Теперь вы живёте на берегу моря, где волны смывают воспоминания.")

    elif "молоток" in inventar:
        print_slow(f"Прошло три месяца. {imya_igroka} ({klichka_igroka}) стоял у ворот особняка Артёма.")
        print()
        print_slow("Вы сбежали и, используя старые связи, доказали свою невиновность.")
        print_slow("«Арасака» снова под вашим контролем.")
        print_slow("Позже вы вспомнили слова деда в камере. Жизнь действительно полна поворотов.")
        print_slow("Вы вернулись к своей жизни, но теперь с новым опытом.")

    print()
    print_slow("Поздравляем! Вы прошли игру «Escape from the shadows».")
    print_slow(f"Ваш срок: {srok_zaklyucheniya} лет")
    print_slow(f"Ваша кличка: {klichka_igroka}")
    print_slow("Собранные предметы: " + ", ".join(inventar))
    print()
    print_slow("Спасибо за игру!")

vvedenie()
